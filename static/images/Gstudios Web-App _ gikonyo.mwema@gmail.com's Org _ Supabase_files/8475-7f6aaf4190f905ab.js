"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8475],{95623:function(e,n,s){var t=s(52322),i=s(89404),o=s(5632),l=s(2784),a=s(62202),r=s(33706),c=s(14528),d=s(99248),u=s(11881),h=s(45077),x=s(54383),m=s(61786),f=s(32079),j=s(43687),p=s(90504);n.Z=e=>{var n,s,g,v;let{organizationIntegrationId:w,foreignProjects:b,supabaseProjects:N,onCreateConnections:y,installedConnections:k=h.Z6,isLoading:S,integrationIcon:C,getForeignProjectIcon:z,choosePrompt:Z="Choose a project",onSkip:_,loadingForeignProjects:W,loadingSupabaseProjects:E,showNoEntitiesState:H=!0,defaultSupabaseProjectRef:L,defaultForeignProjectId:G,mode:P}=e,R=(0,o.useRouter)(),[Y,A]=(0,l.useState)(!1),[I,U]=(0,l.useState)(!1),F=(0,l.useRef)(null),J=(0,l.useRef)(null),O=(0,c.lL)(),[T,X]=(0,l.useState)(L);(0,l.useEffect)(()=>{void 0!==L&&void 0===T&&X(L)},[L,T]);let[D,q]=(0,l.useState)(G);(0,l.useEffect)(()=>{void 0!==G&&void 0===D&&q(G)},[G,D]);let B=new Set(k.map(e=>e.foreign_project_id)),K=T?N.find(e=>{var n;return(null===(n=e.ref)||void 0===n?void 0:n.toLowerCase())===(null==T?void 0:T.toLowerCase())}):void 0,M=D?b.find(e=>{var n;return(null===(n=e.id)||void 0===n?void 0:n.toLowerCase())===(null==D?void 0:D.toLowerCase())}):void 0,Q=e=>{let{children:n,className:s,...i}=e;return(0,t.jsx)("div",{className:(0,x.cn)("flex-1 min-w-0 flex flex-col grow gap-6 px-5 mx-auto w-full justify-center items-center",s),...i,children:n})},V=0===N.length,$=0===b.length,ee=V?"Supabase":P,en=V?P:"Supabase";return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"relative border rounded-lg p-12 bg shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-grid-black/5 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-white/5 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]",style:{backgroundPosition:"10px 10px"}}),W||E?(0,t.jsxs)("div",{className:"w-1/2 mx-auto space-y-2 py-4",children:[(0,t.jsx)("p",{className:"text-sm text-foreground text-center",children:"Loading projects"}),(0,t.jsx)(r.Z,{active:!0})]}):H&&(V||$)?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("h5",{className:"text-foreground",children:["No ",ee," Projects found"]}),(0,t.jsxs)("p",{className:"text-foreground-light text-sm",children:["You will need to create a ",ee," Project to link to a ",en," ","Project.",(0,t.jsx)("br",{}),"You can skip this and create a Project Connection later."]})]}):(0,t.jsxs)("div",{className:"flex justify-center gap-0 w-full relative",children:[(0,t.jsxs)(Q,{children:[(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-12 h-12 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(d.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-6"})}),(0,t.jsxs)(m.J2,{open:Y,onOpenChange:A,children:[(0,t.jsx)(m.xo,{asChild:!0,children:(0,t.jsx)(f.z,{ref:F,type:"default",block:!0,disabled:void 0!==L||E,loading:E,className:"justify-start",icon:(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(d.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),iconRight:void 0===L?(0,t.jsx)("span",{className:"grow flex justify-end",children:(0,t.jsx)(j.Z,{className:""})}):null,children:K?K.name:"Choose Supabase Project"})}),(0,t.jsx)(m.yk,{className:"p-0 !w-72",side:"bottom",align:"center",style:{width:null===(n=F.current)||void 0===n?void 0:n.offsetWidth},children:(0,t.jsxs)(p.mY,{children:[(0,t.jsx)(p.sZ,{placeholder:"Search for a project"}),(0,t.jsxs)(p.e8,{className:"!max-h-[170px]",children:[(0,t.jsx)(p.rb,{children:"No results found."}),(0,t.jsxs)(p.fu,{children:[N.map((e,n)=>(0,t.jsxs)(p.di,{value:"".concat(e.name.replaceAll('"',""),"-").concat(n),className:"flex gap-2 items-center",onSelect:()=>{e.ref&&X(e.ref),A(!1)},children:[(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(d.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),(0,t.jsx)("span",{children:e.name})]},e.ref)),0===N.length&&(0,t.jsx)("p",{className:"text-xs text-foreground-lighter px-2 py-2",children:"No projects found in this organization"})]}),(0,t.jsx)(p.zz,{}),(0,t.jsx)(p.fu,{children:(0,t.jsxs)(p.di,{className:"flex gap-2 items-center cursor-pointer",onClick:()=>R.push("/new/".concat(null==O?void 0:O.slug)),onSelect:()=>R.push("/new/".concat(null==O?void 0:O.slug)),children:[(0,t.jsx)(i.Z,{size:16}),(0,t.jsx)("span",{children:"Create a new project"})]})})]})]})})]})]}),(0,t.jsx)("div",{className:"border border-foreground-lighter h-px w-8 border-dashed self-end mb-4"}),(0,t.jsxs)(Q,{children:[(0,t.jsx)("div",{className:"bg-black shadow rounded p-1 w-12 h-12 flex justify-center items-center",children:C}),(0,t.jsxs)(m.J2,{open:I,onOpenChange:U,children:[(0,t.jsx)(m.xo,{asChild:!0,children:(0,t.jsx)(f.z,{ref:J,type:"default",block:!0,disabled:W,loading:W,className:"justify-start",icon:(0,t.jsx)("div",{children:M&&null!==(g=null==z?void 0:z(M))&&void 0!==g?g:C}),iconRight:(0,t.jsx)("span",{className:"grow flex justify-end",children:(0,t.jsx)(j.Z,{className:""})}),children:null!==(v=M&&M.name)&&void 0!==v?v:Z})}),(0,t.jsx)(m.yk,{className:"p-0 !w-72",side:"bottom",align:"center",style:{width:null===(s=J.current)||void 0===s?void 0:s.offsetWidth},children:(0,t.jsxs)(p.mY,{children:[(0,t.jsx)(p.sZ,{placeholder:"Search for a project"}),(0,t.jsxs)(p.e8,{className:"!max-h-[170px]",children:[(0,t.jsx)(p.rb,{children:"No results found."}),(0,t.jsxs)(p.fu,{children:[b.map((e,n)=>{var s;return(0,t.jsxs)(p.di,{value:"".concat(e.name.replaceAll('"',""),"-").concat(n),className:"flex gap-2 items-center",onSelect:()=>{e.id&&q(e.id),U(!1)},children:[(0,t.jsx)("div",{children:null!==(s=null==z?void 0:z(e))&&void 0!==s?s:C}),(0,t.jsx)("span",{className:"truncate",title:e.name,children:e.name})]},e.id)}),0===b.length&&(0,t.jsx)(p.rb,{children:"No results found."})]}),"GitHub"===P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.zz,{}),(0,t.jsx)(p.fu,{children:(0,t.jsxs)(p.di,{className:"flex gap-2 items-center cursor-pointer",onSelect:()=>(0,u.U)("install"),children:[(0,t.jsx)(i.Z,{size:16}),"Add GitHub Repositories"]})})]})]})]})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex w-full justify-end gap-2",children:[void 0!==_&&(0,t.jsx)(f.z,{size:"medium",type:"default",onClick:()=>{_()},children:"Skip"}),(0,t.jsx)(f.z,{size:"medium",className:"self-end",onClick:function(){return(null==M?void 0:M.id)?(null==K?void 0:K.ref)?B.has(null!=D?D:"")?a.Am.error("Unable to connect to ".concat(M.name,": Selected repository already has an installed connection to a project")):void y({organizationIntegrationId:w,connection:{foreign_project_id:null==M?void 0:M.id,supabase_project_ref:null==K?void 0:K.ref,integration_id:"0",metadata:{...M}},orgSlug:null==O?void 0:O.slug,new:{installation_id:M.installation_id,project_ref:K.ref,repository_id:Number(M.id)}}):console.error("No Supabase project ref set"):console.error("No Foreign project ID set")},loading:S,disabled:W||E||S||!K||!M,children:"Connect project"})]})]})}},33706:function(e,n,s){var t=s(52322);n.Z=e=>{let{active:n}=e;return n?(0,t.jsx)("div",{className:"logs-shimmering-loader w-full h-0.5"}):null}},11881:function(e,n,s){s.d(n,{H4:function(){return l},U:function(){return a},Xw:function(){return o}});let t="Iv1.b91a6d8eaa272168",i="https://github.com/login/oauth/authorize?client_id=".concat(t),o="https://github.com/apps/".concat("supabase","/installations/new"),l="https://github.com/settings/connections/applications/".concat(t);function a(e){let n=void 0!==window.screenLeft?window.screenLeft:window.screenX,s=void 0!==window.screenTop?window.screenTop:window.screenY,t=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=t/window.screen.availWidth,r=window.open("install"===e?o:i,"GitHub","scrollbars=yes,resizable=no,status=no,location=no,toolbar=no,menubar=no,\n     width=".concat(600/a,", \n     height=").concat(800/a,", \n     top=").concat((l-800)/2/a+s,", \n     left=").concat((t-600)/2/a+n,"\n     "));r&&r.focus()}},97589:function(e,n,s){var t=s(52322);s(2784);var i=s(66702),o=s(2515);n.Z=function(e){return(0,t.jsx)(o.Z,{icon:i.Z,...e})}},43687:function(e,n,s){var t=s(52322);s(2784);var i=s(95271),o=s(2515);n.Z=function(e){return(0,t.jsx)(o.Z,{icon:i.Z,...e})}}}]);