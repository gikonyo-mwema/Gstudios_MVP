"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3610],{40412:function(e,r,i){i.d(r,{Z:function(){return y}});var s=i(52322),t=i(94175),n=i(46594),l=i(43276),o=i(99248),a=i(38183);let c=e=>{let r;switch(e.status){case o.S.ACTIVE_HEALTHY:r="isHealthy";break;case o.S.GOING_DOWN:case o.S.PAUSING:r="isPausing";break;case o.S.INACTIVE:r="isPaused";break;case o.S.RESTORING:r="isRestoring";break;case o.S.UNKNOWN:case o.S.COMING_UP:r="isComingUp"}return r};var d=i(24990),u=i(94865),g=i(22293),h=i(1073),x=i(60587),p=i(82137),m=i(95492),v=i(54383),j=i(25633);let f=e=>{let{resourceWarnings:r,projectStatus:i}=e,t=(null==r?void 0:r.is_readonly_mode_enabled)?["is_readonly_mode_enabled"]:Object.keys(r||{}).filter(e=>"project"!==e&&"is_readonly_mode_enabled"!==e&&(null==r?void 0:r[e])!==null),n=t.some(e=>(null==r?void 0:r[e])==="critical"),l=t.includes("is_readonly_mode_enabled")||n,o=void 0!==r?(0,g.L)(r,t[0],"cardContent"):void 0,a="isPaused"===i?"Project is paused":"isPausing"===i?"Project is pausing":"isComingUp"===i?"Project is coming up":"isRestoring"===i?"Project is restoring":r?t.length>1?u.x.multiple_resource_warnings.cardContent[n?"critical":"warning"].title:null==o?void 0:o.title:void 0,c="isPaused"===i?"This project will not accept requests until resumed":"isPausing"===i?"The pause process will complete in a few minutes":"isComingUp"===i||"isRestoring"===i?"Your project will be ready in a few minutes":r?(t.length,null==o?void 0:o.description):void 0;return(0===t.length||void 0===o)&&"isHealthy"===i?null:(0,s.jsxs)(m.bZ,{variant:l?"destructive":"isPaused"===i?"default":"warning",className:(0,v.cn)("border-0 p-5 pb-[1.25rem]","bg-transparent","[&>svg]:left-[1.25rem] [&>svg]:top-3.5 [&>svg]:border",l?"":"[&>svg]:text-foreground [&>svg]:bg-surface-100"),children:["isPaused"===i||"isPausing"===i?(0,s.jsx)(j.Z,{strokeWidth:1.5,size:12}):"isRestoring"===i||"isComingUp"===i?(0,s.jsx)(h.Z,{strokeWidth:1.5,size:12}):(0,s.jsx)(x.Z,{strokeWidth:1.5,size:12}),(0,s.jsxs)("div",{className:"flex justify-between items-center w-full gap-x-1",children:[(0,s.jsx)(m.Cd,{className:"text-xs mb-0",children:a}),(0,s.jsxs)(d.fC,{delayDuration:0,children:[(0,s.jsx)(d.xz,{children:(0,s.jsx)(p.Z,{size:14,className:"text-foreground-light hover:text-foreground"})}),(0,s.jsx)(d.h_,{children:(0,s.jsxs)(d.VY,{side:"bottom",children:[(0,s.jsx)(d.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border bg-studio w-[280px]",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:c})})]})})]})]})]})};var y=e=>{var r,i;let{project:d,rewriteHref:u,githubIntegration:g,vercelIntegration:h,resourceWarnings:x}=e,{name:p,ref:m}=d,v="".concat(d.cloud_provider," | ").concat(d.region),j=(null===(r=d.preview_branch_refs)||void 0===r?void 0:r.length)>0,y=null!==(i=null==g?void 0:g.metadata.name)&&void 0!==i?i:void 0,b=c(d);return(0,s.jsx)("li",{className:"list-none",children:(0,s.jsx)(l.Z,{linkHref:u||"/project/".concat(m),className:"h-44 !px-0 group pt-5 pb-0",title:(0,s.jsxs)("div",{className:"w-full justify-between space-y-1.5 px-5",children:[(0,s.jsx)("p",{className:"flex-shrink truncate text-sm pr-4",children:p}),(0,s.jsx)("span",{className:"text-sm lowercase text-foreground-light",children:v}),(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[void 0!==h&&(0,s.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center text-black dark:text-white",children:(0,s.jsx)(a.Z,{src:"".concat(o.GW,"/img/icons/vercel-icon.svg"),title:"Vercel Icon",className:"w-3"})}),j&&(0,s.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center",children:(0,s.jsx)(t.Z,{size:12,strokeWidth:1.5})}),void 0!==g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center",children:(0,s.jsx)(n.Z,{size:12,strokeWidth:1.5})}),(0,s.jsx)("p",{className:"text-xs !ml-2 text-foreground-light",children:y})]})]})]}),footer:(0,s.jsx)(f,{projectStatus:b,resourceWarnings:x})})})}},60008:function(e,r,i){var s=i(52322),t=i(43276);r.Z=()=>(0,s.jsx)(t.Z,{className:"h-44 !px-0 pt-5 pb-0",title:(0,s.jsxs)("div",{className:"w-full justify-between space-y-1.5 px-5",children:[(0,s.jsx)("p",{className:"flex-shrink truncate text-sm pr-4 shimmering-loader h-5 w-20"}),(0,s.jsx)("p",{className:"text-sm lowercase text-foreground-light h-4 w-40 shimmering-loader"})]})})},3610:function(e,r,i){i.d(r,{l:function(){return P}});var s=i(52322),t=i(3440),n=i.n(t),l=i(39097),o=i.n(l),a=i(56006),c=i(89777),d=i(61660),u=i(9915),g=i(36492),h=i(31696),x=i(17436);async function p(e){let{data:r,error:i}=await (0,h.U2)("/platform/stripe/invoices/overdue",{signal:e});return i&&(0,h.S3)(i),r}let m=function(){let{enabled:e=!0,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,g.a)(x.Y.overdueInvoices(),e=>{let{signal:r}=e;return p(r)},{enabled:e,...r})};var v=i(31310),j=i(96551),f=i(26198),y=i(43683),b=i(14528),w=i(99248),N=i(82667),_=i(32079),k=i(31654),Z=i(40412),C=i(60008),P=e=>{let{search:r,rewriteHref:i}=e,{data:t,isLoading:l,isSuccess:o}=(0,v.tl)(),{data:a,isLoading:d,isError:u,error:g}=(0,f.Sy)(),{isLoading:h,isError:x,error:p}=(0,j.j)(),{data:b}=(0,y.q)(),{data:N}=m({enabled:w.Qy}),_=n()(a,"organization_id"),k=!!w.Qy&&h,Z=r.length>0&&void 0!==a&&0===a.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.ref.includes(r.toLowerCase())).length;return l?(0,s.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,s.jsx)(C.Z,{}),(0,s.jsx)(C.Z,{})]}):Z?(0,s.jsx)(c.Z,{searchString:r}):o&&t&&(null==t?void 0:t.length)>0?(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.map(e=>(0,s.jsx)(z,{organization:e,projects:_[e.id],overdueInvoices:(null!=N?N:[]).filter(r=>r.organization_id===e.id),resourceWarnings:null!=b?b:[],rewriteHref:i,isLoadingPermissions:k,isErrorPermissions:x,permissionsError:p,isLoadingProjects:d,isErrorProjects:u,projectsError:g,search:r},e.id))}):(0,s.jsx)(S,{slug:""})};let z=e=>{let{organization:r,projects:i,overdueInvoices:t,resourceWarnings:n,isLoadingPermissions:l,isErrorPermissions:c,permissionsError:g,isLoadingProjects:h,isErrorProjects:x,projectsError:p,rewriteHref:m,search:v}=e,j=!i||0===i.length,f=[...i||[]].sort((e,r)=>e.name.localeCompare(r.name)),y=v.length>0?f.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.ref.includes(v.toLowerCase())):f,{data:b}=(0,u.T)({orgSlug:null==r?void 0:r.slug}),{data:w}=(0,d.q)({organizationId:null==r?void 0:r.id}),k=null==w?void 0:w.map(e=>{var r,i,s,t,n;return{id:String(e.id),added_by:{id:String(null===(r=e.user)||void 0===r?void 0:r.id),primary_email:null!==(t=null===(i=e.user)||void 0===i?void 0:i.primary_email)&&void 0!==t?t:"",username:null!==(n=null===(s=e.user)||void 0===s?void 0:s.username)&&void 0!==n?n:""},foreign_project_id:String(e.repository.id),supabase_project_ref:e.project.ref,organization_integration_id:"unused",inserted_at:e.inserted_at,updated_at:e.updated_at,metadata:{name:e.repository.name}}}),P=null==b?void 0:b.filter(e=>"Vercel"===e.integration.name).flatMap(e=>e.connections);return v.length>0&&0===y.length?null:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,s.jsx)("h4",{className:"text-lg flex items-center",children:r.name}),!!t.length&&(0,s.jsx)("div",{children:(0,s.jsx)(_.z,{asChild:!0,type:"danger",children:(0,s.jsx)(o(),{href:"/org/".concat(r.slug,"/invoices"),children:"Outstanding Invoices"})})}),(null==r?void 0:r.restriction_status)==="grace_period"&&(0,s.jsx)("div",{children:(0,s.jsx)(_.z,{asChild:!0,type:"warning",children:(0,s.jsx)(o(),{href:"/org/".concat(r.slug,"/billing"),children:"Grace Period"})})}),(null==r?void 0:r.restriction_status)==="grace_period_over"&&(0,s.jsx)("div",{children:(0,s.jsx)(_.z,{asChild:!0,type:"warning",children:(0,s.jsx)(o(),{href:"/org/".concat(r.slug,"/billing"),children:"Grace Period Over"})})}),(null==r?void 0:r.restriction_status)==="restricted"&&(0,s.jsx)("div",{children:(0,s.jsx)(_.z,{asChild:!0,type:"danger",children:(0,s.jsx)(o(),{href:"/org/".concat(r.slug,"/billing"),children:"Services Restricted"})})})]}),l||h?(0,s.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,s.jsx)(C.Z,{}),(0,s.jsx)(C.Z,{})]}):(0,s.jsx)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:c?(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsx)(a.Z,{subject:"Failed to retrieve permissions for your account",error:g})}):x?(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsx)(a.Z,{subject:"Failed to retrieve projects under ".concat(name),error:p})}):j?(0,s.jsx)(S,{slug:r.slug}):null==y?void 0:y.map(e=>(0,s.jsx)(Z.Z,{project:e,rewriteHref:m?m(e.ref):void 0,resourceWarnings:n.find(r=>r.project===e.ref),githubIntegration:null==k?void 0:k.find(r=>r.supabase_project_ref===e.ref),vercelIntegration:null==P?void 0:P.find(r=>r.supabase_project_ref===e.ref)},(0,N.pZ)(5)))})]},r.id)},S=e=>{let{slug:r}=e,i=(0,b.N3)("projects:create");return(0,s.jsxs)("div",{className:"col-span-4 space-y-4 rounded-lg border border-dashed p-6 text-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{children:"No projects"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Get started by creating a new project."})]}),i&&(0,s.jsx)(_.z,{asChild:!0,icon:(0,s.jsx)(k.Z,{}),children:(0,s.jsx)(o(),{href:"/new/".concat(r),children:"New Project"})})]})}},89777:function(e,r,i){var s=i(52322),t=i(54383),n=i(32079);r.Z=e=>{let{searchString:r,onResetFilter:i,className:l}=e;return(0,s.jsxs)("div",{className:(0,t.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",l),children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',r,'" did not return any results']})]}),void 0!==i&&(0,s.jsx)(n.z,{type:"default",onClick:()=>i(),children:"Reset filter"})]})}},9915:function(e,r,i){i.d(r,{T:function(){return a}});var s=i(36492),t=i(88354),n=i(99248),l=i(90301);async function o(e,r){let{orgSlug:i}=e;if(!i)throw Error("orgSlug is required");let s=await (0,t.U2)("".concat(n.T5,"/integrations/").concat(i,"?expand=true"),{signal:r});if(s.error)throw s.error;return s}let a=function(e){let{orgSlug:r}=e,{enabled:i=!0,...t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.a)(l.F.integrationsListWithOrg(r),e=>{let{signal:i}=e;return o({orgSlug:r},i)},{enabled:i&&void 0!==r,...t})}},17436:function(e,r,i){i.d(r,{Y:function(){return s}});let s={overdueInvoices:()=>["invoices","overdue"],invoice:e=>["invoice",e],list:(e,r)=>["invoices",e,r],count:e=>["invoices",e,"count"],projectInvoices:(e,r)=>["invoices",e,r],projectInvoicesCount:e=>["invoices",e,"count"],orgUpcomingPreview:e=>["invoices",e,"upcoming-preview"]}},60587:function(e,r,i){i.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(52186).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94175:function(e,r,i){i.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(52186).Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},46594:function(e,r,i){i.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(52186).Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},82137:function(e,r,i){i.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(52186).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1073:function(e,r,i){i.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(52186).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])}}]);