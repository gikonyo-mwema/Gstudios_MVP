(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{27559:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return r(23111)}])},16384:function(e,s,r){"use strict";function n(e){var s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",{displayName:n,display_name:t,fullName:a,full_name:i,familyName:l,family_name:o,givenName:c,given_name:d,surname:u,lastName:x,last_name:h,firstName:m,first_name:j}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{},p=l||o||u||x||h,f=c||d||m||j;return n||t||a||i||f&&p&&"".concat(f," ").concat(p)||r}function t(e){var s;let{avatarUrl:r,avatarURL:n,avatar_url:t,profileUrl:a,profileURL:i,profile_url:l,profileImage:o,profile_image:c,profileImageUrl:d,profileImageURL:u,profile_image_url:x}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{};return r||n||t||o||c||a||i||l||d||u||x}r.d(s,{E:function(){return t},G:function(){return n}})},38530:function(e,s,r){"use strict";r.d(s,{RT:function(){return i},xY:function(){return o}});var n=r(36492),t=r(31696),a=r(7161);let i=10;async function l(e,s){let{projectRef:r,page:n=1,keywords:a="",filter:l}=e;if(!r)throw Error("Project ref is required");let o={limit:i.toString(),offset:((n-1)*10).toString(),keywords:a};l&&(o.verified=l);let{data:c,error:d}=await (0,t.U2)("/platform/auth/{ref}/users",{params:{path:{ref:r},query:o},signal:s});return d&&(0,t.S3)(d),c}let o=function(e){let{projectRef:s,page:r,keywords:t,filter:i,connectionString:o}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(a.o.users(s,{page:r,keywords:t,filter:i}),e=>{let{signal:n}=e;return l({projectRef:s,page:r,keywords:t,filter:i,connectionString:o},n)},{enabled:c&&void 0!==s,...d})}},23111:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return eT}});var n=r(52322),t=r(85945),a=r(2784),i=r(59491),l=r(99959),o=r(63910),c=r(27570),d=r(53449),u=r(14782),x=r(7161),h=r(38530),m=r(14528),j=r(750),p=r(89682),f=r(32079),v=r(61373),y=r(62284),g=r(49893),w=r(24990),b=r(4678),N=r.n(b),Z=r(34503),C=r(43687),S=r(4191),_=r(13980),k=r.n(_);function E(){return(E=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var P=(0,a.forwardRef)(function(e,s){var r=e.color,n=e.size,t=void 0===n?24:n,i=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return a.createElement("svg",E({ref:s,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),a.createElement("circle",{cx:"8.5",cy:"7",r:"4"}),a.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),a.createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});P.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},P.displayName="UserPlus";var O=r(2515),z=function(e){return(0,n.jsx)(O.Z,{icon:P,...e})},U=r(99248),T=r(48694),A=r(62202),F=r(47852),L=r(62277),D=r(48228),V=r(88354);async function X(e){let{projectRef:s,email:r}=e,n=await (0,V.v_)("".concat(U.T5,"/auth/").concat(s,"/invite"),{email:r});if(n.error)throw n.error;return n}let R=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,D.D)(e=>X(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(x.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to invite user: ".concat(e.message)):s(e,r,n)},...r})};var Y=e=>{let{visible:s,setVisible:r}=e,{ref:t}=(0,l.UO)(),{mutate:a,isLoading:o}=R({onSuccess:(e,s)=>{A.ZP.success("Sent invite email to ".concat(s.email)),r(!1)}}),c=(0,m.Xo)(i.KA.AUTH_EXECUTE,"invite_user"),d=async e=>{if(!t)return console.error("Project ref is required");a({projectRef:t,email:e.email})};return(0,n.jsx)("div",{children:(0,n.jsx)(F.C,{closable:!0,hideFooter:!0,size:"small",visible:s,header:"Invite a new user",onCancel:()=>r(!s),children:(0,n.jsx)(L.Z,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let s={};return 0===e.email.length?s.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(s.email="".concat(e.email," is an invalid email")),s},onSubmit:d,children:()=>(0,n.jsxs)("div",{className:"space-y-6 py-4",children:[(0,n.jsx)(F.C.Content,{children:(0,n.jsx)(j.Z,{id:"email",className:"w-full",label:"User email",icon:(0,n.jsx)(T.Z,{}),type:"email",name:"email",placeholder:"User email"})}),(0,n.jsx)(F.C.Content,{children:(0,n.jsx)(f.z,{block:!0,size:"small",htmlType:"submit",loading:o,disabled:!c||o,children:"Invite user"})})]})})},"invite-user-modal")})},M=r(55446),q=r(89689),H=r(12934);async function K(e){let{protocol:s,endpoint:r,serviceApiKey:n,user:t}=e,a=await (0,V.v_)("".concat(s,"://").concat(r,"/auth/v1/admin/users"),{email:t.email,password:t.password,email_confirm:t.autoConfirmUser},{headers:{apikey:n,Authorization:"Bearer ".concat(n)}});if(a.error)throw a.error;return a}let I=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,D.D)(e=>K(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(x.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to create user: ".concat(e.message)):s(e,r,n)},...r})};var Q=r(53535),W=e=>{let{visible:s,setVisible:r}=e,{ref:t}=(0,l.UO)(),{data:a,isLoading:o,isSuccess:c}=(0,Q.q)({projectRef:t},{enabled:s}),d=(0,m.Xo)(i.KA.AUTH_EXECUTE,"create_user"),{mutate:u,isLoading:x}=I({async onSuccess(e){A.ZP.success("Successfully created user: ".concat(e.email)),r(!1)}}),h=async e=>{if(!c)return A.ZP.error("Failed to create user: Error loading project config");let{protocol:s,endpoint:r,serviceApiKey:n}=a.autoApiService;u({projectRef:t,endpoint:r,protocol:s,serviceApiKey:n,user:e})};return(0,n.jsx)(F.C,{closable:!0,hideFooter:!0,size:"small",visible:s,header:"Create a new user",onCancel:()=>r(!s),loading:!0,children:(0,n.jsx)(L.Z,{validateOnBlur:!1,initialValues:{email:"",password:"",autoConfirmUser:!0},validate:e=>{var s;let r={};return 0===e.email.length?r.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(r.email="".concat(e.email," is an invalid email")),(null===(s=e.password)||void 0===s?void 0:s.trim())||(r.password="Please enter a password"),r},onSubmit:h,children:()=>(0,n.jsx)(M.Z,{active:o,children:(0,n.jsxs)("div",{className:"space-y-6 py-4",children:[(0,n.jsx)(F.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(j.Z,{id:"email",autoComplete:"off",label:"User Email",icon:(0,n.jsx)(S.Z,{}),type:"email",name:"email",placeholder:"user@example.com",disabled:x||o}),(0,n.jsx)(j.Z,{id:"password",name:"password",type:"password",label:"User Password",placeholder:"••••••••",icon:(0,n.jsx)(q.Z,{}),disabled:x||o,autoComplete:"new-password"}),(0,n.jsx)(H.Z,{value:"true",id:"autoConfirmUser",name:"autoConfirmUser",label:"Auto Confirm User?",size:"medium",description:"Creates the user without sending them a confirmation email",defaultChecked:!0,disabled:x||o})]})}),(0,n.jsx)(F.C.Content,{children:(0,n.jsx)(f.z,{block:!0,size:"small",htmlType:"submit",loading:x,disabled:!d||x||o,children:"Create user"})})]})})})},"create-user-modal")},$=e=>{let{projectKpsVersion:s}=e,r=!U.Qy||N().gte(N().coerce(null!=s?s:"kps-v2.5.4"),N().coerce("kps-v2.5.3")),t=(0,m.Xo)(i.KA.AUTH_EXECUTE,"invite_user"),l=(0,m.Xo)(i.KA.AUTH_EXECUTE,"create_user"),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.h_,{children:[(0,n.jsx)(Z.$F,{asChild:!0,children:(0,n.jsx)(f.z,{type:"primary",iconRight:(0,n.jsx)(C.Z,{strokeWidth:1.5}),children:"Add user"})}),(0,n.jsxs)(Z.AW,{side:"bottom",align:"end",children:[r&&(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{className:"w-full",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2",disabled:!t,onClick:()=>c(!0),children:[(0,n.jsx)(S.Z,{size:"small"}),(0,n.jsx)("p",{children:"Send invitation"})]})}),!t&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to invite users"})})]})})]}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{className:"w-full text-left",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2",disabled:!l,onClick:()=>u(!0),children:[(0,n.jsx)(z,{size:"small"}),(0,n.jsx)("p",{children:"Create new user"})]})}),!l&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create users"})})]})})]})]})]}),r&&(0,n.jsx)(Y,{visible:o,setVisible:c}),(0,n.jsx)(W,{visible:d,setVisible:u})]})},B=r(15735),G=r(56006),J=r(39459),ee=r(28879),es=r.n(ee),er=r(81076),en=r(62614);async function et(e){let{projectRef:s,userId:r}=e,n=await (0,V.$v)("".concat(U.T5,"/auth/").concat(s,"/users/").concat(r,"/factors"));if(n.error)throw n.error;return n}let ea=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.D)(e=>et(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to delete the user's MFA factors: ".concat(e.message)):s(e,r,n)},...r})};async function ei(e){let{projectRef:s,user:r}=e,n=await (0,V.$v)("".concat(U.T5,"/auth/").concat(s,"/users"),r);if(n.error)throw n.error;return n}let el=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,D.D)(e=>ei(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(x.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to delete user: ".concat(e.message)):s(e,r,n)},...r})};async function eo(e){let{projectRef:s,user:r}=e,n=await (0,V.v_)("".concat(U.T5,"/auth/").concat(s,"/recover"),r);if(n.error)throw n.error;return n}let ec=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.D)(e=>eo(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to reset user password: ".concat(e.message)):s(e,r,n)},...r})};async function ed(e){let{projectRef:s,user:r}=e,n=await (0,V.v_)("".concat(U.T5,"/auth/").concat(s,"/magiclink"),r);if(n.error)throw n.error;return n}let eu=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.D)(e=>ed(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to send magic link: ".concat(e.message)):s(e,r,n)},...r})};async function ex(e){let{projectRef:s,user:r}=e,n=await (0,V.v_)("".concat(U.T5,"/auth/").concat(s,"/otp"),r);if(n.error)throw n.error;return n}let eh=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.D)(e=>ex(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to send magic link: ".concat(e.message)):s(e,r,n)},...r})};var em=r(82667),ej=r(23056),ep=r(49541),ef=r(24203),ev=r(62134),ey=r(54383),eg=r(74138),ew=e=>{let{user:s,canRemoveUser:r,canRemoveMFAFactors:t,setSelectedUser:i,setUserSidePanelOpen:o}=e,{ref:c}=(0,l.UO)(),[d,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),{mutate:m,isLoading:j}=ec({onSuccess:()=>{A.ZP.success("Sent password recovery to ".concat(s.email))}}),{mutate:p,isLoading:v}=eu({onSuccess:()=>{A.ZP.success("Sent magic link to ".concat(s.email))}}),{mutate:y,isLoading:g}=eh({onSuccess:()=>{A.ZP.success("Sent OTP to ".concat(s.phone))}}),{mutate:b,isLoading:N}=el({onSuccess:()=>{A.ZP.success("Successfully deleted ".concat(s.email)),u(!1)}}),{mutate:C,isLoading:_}=ea({onSuccess:()=>{A.ZP.success("Successfully deleted the user's factors"),h(!1)}}),k=async()=>{if(!c)return console.error("Project ref is required");m({projectRef:c,user:s})};async function E(){if(!c)return console.error("Project ref is required");p({projectRef:c,user:s})}async function P(){if(!c)return console.error("Project ref is required");y({projectRef:c,user:s})}async function O(){if(await (0,em.Vs)(200),!c)return console.error("Project ref is required");b({projectRef:c,user:s})}async function z(){return(await (0,em.Vs)(200),c)?s.id?void C({projectRef:c,userId:s.id}):console.error("User id is required"):console.error("Project ref is required")}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.h_,{children:[(0,n.jsx)(Z.$F,{asChild:!0,children:(0,n.jsx)(f.z,{type:"text",loading:j||v||g||N||_,className:"hover:border-muted flex",children:(0,n.jsx)(ej.Z,{})})}),(0,n.jsx)(Z.AW,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:()=>{i(s),o(!0)},children:[(0,n.jsx)(ep.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"View user info"})]}),(0,n.jsx)(Z.VD,{}),null!==s.email?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:k,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send password recovery"})]}),(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:E,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send magic link"})]})]}):null,null!==s.phone?(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:P,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send OTP"})]}):null,(0,n.jsx)(Z.VD,{}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{asChild:!0,children:(0,n.jsxs)(Z.Xi,{onClick:()=>{h(!0)},disabled:!t,className:"space-x-2",children:[(0,n.jsx)(ef.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Remove MFA factors"})]})}),!t&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to remove a user's authentication factors."})})]})})]}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{asChild:!0,children:(0,n.jsxs)(Z.Xi,{onClick:()=>{u(!0)},disabled:!r,className:"space-x-2",children:[(0,n.jsx)(ev.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Delete user"})]})}),!r&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:(0,ey.cn)(["rounded bg-alternative py-1 px-2 leading-none shadow","border border-background"]),children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete users"})})]})})]})]})})]}),(0,n.jsx)(eg.Z,{visible:d,title:"Confirm to delete",confirmLabel:"Delete",onCancel:()=>u(!1),onConfirm:()=>{O()},children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete user ",s.email,"?"]})}),(0,n.jsx)(eg.Z,{visible:x,title:"Confirm to delete",confirmLabel:"Delete",onCancel:()=>h(!1),onConfirm:()=>{z()},children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This is permanent! Are you sure you want to delete the user's MFA factors?"})})]})},eb=r(16384),eN=e=>{var s;let{user:r,canRemoveUser:t,canRemoveMFAFactors:a,setSelectedUser:i,setUserSidePanelOpen:l}=e,o=r.email_confirmed_at||r.phone_confirmed_at,c=es()(r.created_at),d=es()(r.last_sign_in_at);return(0,n.jsxs)(B.Z.tr,{className:"relative",children:[(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("span",{className:"text-foreground",children:(0,eb.G)(r)})}),(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{className:"text-sm text-foreground",children:r.email?r.email:"-"})})}),(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("span",{className:"text-foreground",children:r.phone?r.phone:"-"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)("span",{className:"capitalize text-foreground",children:r.is_anonymous?"Anonymous":null==r?void 0:null===(s=r.raw_app_meta_data)||void 0===s?void 0:s.provider})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)("span",{className:"text-foreground",children:null==c?void 0:c.format("DD MMM, YYYY HH:mm")})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(null==r?void 0:r.last_sign_in_at)?null==d?void 0:d.format("DD MMM, YYYY HH:mm"):o?"Never":(0,n.jsx)(er.C,{variant:"warning",children:"Waiting for verification.."})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsxs)("div",{className:"flex max-w-[72px] items-baseline",children:[(0,n.jsx)(en.Z,{className:"font-xs bash",children:r.id}),(0,n.jsx)("div",{children:"..."})]})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(ew,{user:r,canRemoveUser:t,canRemoveMFAFactors:a,setSelectedUser:i,setUserSidePanelOpen:l})})]},r.id)},eZ=r(41679),eC=r(82),eS=()=>(0,n.jsxs)(B.Z.tr,{className:"relative",children:[(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-36"})}),(0,n.jsx)(B.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-10"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-32"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(eZ.Z,{className:"h-[20px] py-0 w-20"})}),(0,n.jsx)(B.Z.td,{className:"table-cell",children:(0,n.jsx)(f.z,{type:"text",disabled:!0,className:"hover:border-muted flex",children:(0,n.jsx)(eC.Z,{})})})]}),e_=e=>{let{total:s,page:r,setPage:t,isFetchingNextPage:a}=e,i=h.RT*(r-1)+1,l=i>s?s:i,o=h.RT*r,c=o>s?s:o,d=c<s;return(0,n.jsxs)("nav",{className:"flex items-center justify-between overflow-hidden","aria-label":"Pagination",children:[(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["Showing",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:l}),"to",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:c}),"of",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:s}),"results"]})}),(0,n.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[r>1&&!(a&&2===r)&&(0,n.jsx)(f.z,{type:"default",onClick:()=>t(r-1),disabled:a,children:"Previous"}),(d||a)&&(0,n.jsx)(f.z,{type:"default",className:"ml-3",onClick:()=>t(r+1),disabled:a,loading:a,children:"Next"})]})]})},ek=r(49251),eE=e=>{let{selectedUser:s,userSidePanelOpen:r,setUserSidePanelOpen:t}=e;return(0,n.jsx)(ek.ZP,{size:"large",header:"View user info",visible:r,onCancel:()=>t(!1),cancelText:"Close",children:(0,n.jsx)(ek.ZP.Content,{className:"space-y-10 py-6",children:(0,n.jsx)(en.Z,{className:"javascript",children:JSON.stringify(s,null,2)})})})},eP=e=>{let{page:s,setPage:r,keywords:t,total:l,users:o,isLoading:c,isSuccess:d,isFetchingNextPage:u,error:x}=e,[h,j]=(0,a.useState)(void 0),[p,f]=(0,a.useState)(!1),v=(0,m.Xo)(i.KA.TENANT_SQL_DELETE,"auth.users"),y=(0,m.Xo)(i.KA.TENANT_SQL_DELETE,"auth.mfa_factors");return(0,n.jsx)(B.Z,{head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.Z.th,{children:"Display Name"}),(0,n.jsx)(B.Z.th,{children:"Email"}),(0,n.jsx)(B.Z.th,{children:"Phone"}),(0,n.jsx)(B.Z.th,{className:"table-cell",children:"Provider"}),(0,n.jsx)(B.Z.th,{className:"table-cell",children:"Created"}),(0,n.jsx)(B.Z.th,{className:"table-cell",children:"Last Sign In"}),(0,n.jsx)(B.Z.th,{className:"table-cell",children:"User UID"}),(0,n.jsx)(B.Z.th,{})]}),body:(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS,{}),(0,n.jsx)(eS,{}),(0,n.jsx)(eS,{}),(0,n.jsx)(eS,{})]}),x&&(0,n.jsx)(G.Z,{error:x,subject:"Failed to retrieve users"}),d&&0===o.length&&(0,n.jsx)(B.Z.tr,{children:(0,n.jsx)(B.Z.td,{colSpan:8,className:"h-14 whitespace-nowrap border-t p-4 text-sm leading-5 text-gray-300",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,n.jsx)(J.Z,{size:16,strokeWidth:2}),(0,n.jsx)("p",{className:"text-foreground-light",children:t?'No users matched the search query "'.concat(t,'"'):"No users in your project"})]})})}),d&&o.length>0&&o.map(e=>(0,n.jsx)(eN,{user:e,canRemoveUser:v,canRemoveMFAFactors:y,setSelectedUser:j,setUserSidePanelOpen:f},e.id)),(0,n.jsx)(B.Z.tr,{children:(0,n.jsx)(B.Z.td,{colSpan:8,children:(0,n.jsx)(e_,{total:l,page:s,setPage:r,isFetchingNextPage:u})})}),(0,n.jsx)(eE,{selectedUser:h,userSidePanelOpen:p,setUserSidePanelOpen:f})]})})},eO=()=>{var e,s;let r=(0,t.NL)(),{project:w}=(0,c.d2)(),{ref:b}=(0,l.UO)(),N=(0,o.cg)(),[Z,C]=(0,a.useState)(1),[S,_]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[P,O]=(0,a.useState)(),z=(0,m.Xo)(i.KA.TENANT_SQL_SELECT,"auth.users"),U=(0,m.N4)(),{data:T,isLoading:A,isSuccess:F,refetch:L,isRefetching:D,error:V,isPreviousData:X}=(0,h.xY)({projectRef:b,page:Z,keywords:k,filter:P,connectionString:null==w?void 0:w.connectionString},{keepPreviousData:!0,onSuccess(e){e.users.length<=0&&e.total>0&&(r.removeQueries(x.o.users(b,{page:Z,keywords:k,filter:P})),C(e=>e-1))}});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"justify-between px-6 pt-6 pb-2 md:flex",children:[(0,n.jsxs)("div",{className:"relative flex space-x-4",children:[(0,n.jsx)(j.Z,{size:"small",value:S,onChange:e=>_(e.target.value),onKeyDown:e=>{13==e.keyCode&&E(S)},className:"min-w-[275px]",name:"email",id:"email",placeholder:"Search by email or phone number",icon:(0,n.jsx)(p.Z,{size:"tiny"}),actions:[S&&(0,n.jsx)(f.z,{size:"tiny",type:"text",icon:(0,n.jsx)(v.Z,{size:"tiny"}),onClick:()=>void(_(""),E(""),O(void 0))})]}),(0,n.jsxs)(y.Z,{size:"small",value:P,onChange:function(e){O(e)},name:"verified",id:"verified",className:"w-[200px]",children:[(0,n.jsx)(y.Z.Option,{label:"All Users",value:"",children:"All Users"}),(0,n.jsx)(y.Z.Option,{label:"Verified Users",value:"verified",children:"Verified Users"}),(0,n.jsx)(y.Z.Option,{label:"Un-Verified Users",value:"unverified",children:"Un-Verified Users"}),(0,n.jsx)(y.Z.Option,{label:"Anonymous Users",value:"anonymous",children:"Anonymous Users"})]})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center gap-2 md:mt-0",children:[N&&(0,n.jsx)(d.Z,{section:["user-management"]}),(0,n.jsx)(f.z,{size:"tiny",icon:(0,n.jsx)(g.Z,{}),type:"default",loading:D&&!X,onClick:()=>L(),children:"Reload"}),(0,n.jsx)($,{projectKpsVersion:null==w?void 0:w.kpsVersion})]})]}),(0,n.jsx)("section",{className:"thin-scrollbars mt-4 overflow-visible px-6",children:(0,n.jsx)("div",{className:"section-block--body relative overflow-x-auto rounded",children:(0,n.jsx)("div",{className:"inline-block min-w-full align-middle",children:U&&!z?(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(u.Z,{isFullPage:!0,resourceText:"access your project's users"})}):(0,n.jsx)(eP,{page:Z,setPage:C,keywords:k,total:null!==(e=null==T?void 0:T.total)&&void 0!==e?e:0,users:null!==(s=null==T?void 0:T.users)&&void 0!==s?s:[],isLoading:A,isSuccess:F,isFetchingNextPage:X,error:V})})})})]})},ez=r(7929);let eU=()=>(0,n.jsx)(eO,{});eU.getLayout=e=>(0,n.jsx)(ez.g1,{title:"Auth",children:e});var eT=eU},48694:function(e,s,r){"use strict";r.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(52186).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},82:function(e,s,r){"use strict";var n=r(52322);r(2784);var t=r(13667),a=r(2515);s.Z=function(e){return(0,n.jsx)(a.Z,{icon:t.Z,...e})}},24203:function(e,s,r){"use strict";r.d(s,{Z:function(){return d}});var n=r(52322),t=r(2784),a=r(13980),i=r.n(a);function l(){return(l=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=(0,t.forwardRef)(function(e,s){var r=e.color,n=e.size,a=void 0===n?24:n,i=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return t.createElement("svg",l({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),t.createElement("path",{d:"M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"}),t.createElement("path",{d:"M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"}),t.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}))});o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},o.displayName="ShieldOff";var c=r(2515),d=function(e){return(0,n.jsx)(c.Z,{icon:o,...e})}},13667:function(e,s,r){"use strict";var n=r(2784),t=r(13980),a=r.n(t);function i(){return(i=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,s){var r=e.color,t=e.size,a=void 0===t?24:t,l=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return n.createElement("svg",i({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),n.createElement("circle",{cx:"12",cy:"12",r:"1"}),n.createElement("circle",{cx:"19",cy:"12",r:"1"}),n.createElement("circle",{cx:"5",cy:"12",r:"1"}))});l.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},l.displayName="MoreHorizontal",s.Z=l}},function(e){e.O(0,[667,9678,8183,8421,3844,9785,7263,9818,9595,5191,7127,9104,6917,7309,9229,3832,8475,626,496,1273,8020,7298,9774,2888,179],function(){return e(e.s=27559)}),_N_E=e.O()}]);